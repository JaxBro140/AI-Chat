<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Realistic CAPTCHA Maker</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #eef1f5;
    padding: 20px;
  }

  .container {
    background: #fff;
    padding: 20px;
    max-width: 600px;
    margin: auto;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  }

  textarea, input {
    width: 100%;
    padding: 8px;
    margin-top: 6px;
    border-radius: 4px;
    border: 1px solid #ccc;
  }

  button {
    margin-top: 12px;
    padding: 10px;
    width: 100%;
    background: #007bff;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }

  .captcha-wrapper {
    margin-top: 20px;
    display: flex;
    align-items: center;
    gap: 15px;
  }

  canvas {
    border: 1px solid #ccc;
    border-radius: 4px;
    background: #f8f8f8;
  }

  .verify-box {
    margin-top: 15px;
  }

  #result {
    margin-top: 10px;
    font-weight: bold;
  }
</style>
</head>
<body>

<div class="container">
  <h2>Realistic CAPTCHA Maker</h2>

  <label>Add your CAPTCHA questions (one per line)</label>
  <textarea id="questions" rows="6" placeholder="Example:
What is 5 + 3?
What color is grass?
Type the word 'human'"></textarea>

  <button onclick="generateCaptcha()">Generate CAPTCHA</button>

  <div class="captcha-wrapper">
    <canvas id="captchaCanvas" width="300" height="80"></canvas>
  </div>

  <div class="verify-box">
    <label>Your Answer</label>
    <input type="text" id="answerInput" placeholder="Type your answer">

    <button onclick="checkAnswer()">Verify Answer</button>
    <div id="result"></div>
  </div>
</div>

<script>
let currentQuestion = "";

function drawNoise(ctx, width, height) {
  for (let i = 0; i < 8; i++) {
    ctx.strokeStyle = "rgba(0,0,0,0.2)";
    ctx.beginPath();
    ctx.moveTo(Math.random() * width, Math.random() * height);
    ctx.lineTo(Math.random() * width, Math.random() * height);
    ctx.stroke();
  }
}

function drawWavyText(ctx, text) {
  ctx.font = "24px Arial Black";
  ctx.fillStyle = "#000";

  let x = 20;
  for (let i = 0; i < text.length; i++) {
    const y = 40 + Math.sin(i * 0.8) * 8;
    ctx.save();
    ctx.translate(x, y);
    ctx.rotate((Math.random() * 0.3) - 0.15);
    ctx.fillText(text[i], 0, 0);
    ctx.restore();
    x += 22;
  }
}

function generateCaptcha() {
  const text = document.getElementById("questions").value.trim();
  if (!text) {
    alert("Please enter at least one question.");
    return;
  }

  const list = text.split("\n").filter(q => q.trim() !== "");
  currentQuestion = list[Math.floor(Math.random() * list.length)];

  const canvas = document.getElementById("captchaCanvas");
  const ctx = canvas.getContext("2d");

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.fillStyle = "#f2f2f2";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  drawNoise(ctx, canvas.width, canvas.height);
  drawWavyText(ctx, currentQuestion);

  document.getElementById("result").textContent = "";
  document.getElementById("answerInput").value = "";
}

function checkAnswer() {
  const userAnswer = document.getElementById("answerInput").value.trim();
  const result = document.getElementById("result");

  if (!userAnswer) {
    result.textContent = "Please enter an answer.";
    result.style.color = "red";
    return;
  }

  result.textContent = "Answer submitted. (Add real checking logic if needed.)";
  result.style.color = "green";
}
</script>

</body>
</html>
